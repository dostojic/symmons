var Symmons=Symmons||{};!function($){"use strict";jQuery.fn.productBrowse=function(a){return this.each(function(){var b=Object.create(Symmons.productBrowse);b.init(this,a)})},
//Options
jQuery.fn.productBrowse.options={contentSelector:"#productBrowseListing",contentFilterSelector:"#productFilterListing",contentAppliedFilterSelector:"#productAppliedFilters",templateSelector:"#template-productBrowseListing",templateFilterSelector:"#template-productFiltersListing",contentFilterCloseBy:".product-browse__filtersclose",contentResetAllSelector:".product-browse__filtersreset",contentRefinebuttonSelector:".product-browse__refinebutton",contentCloseFilter:".img-close-green",contentClearSearchVal:".img-close-grey",contentSearchFilter:".img-search-filters",contentCancelFilter:".product-browse__cancelbutton",contentBrowseFilter:".product-browse__filters",contentSearchField:".product-browse__search",contentApplyButton:".product-browse__applybutton",contentFiltersSection:".product-browse__filters-applied",contentSortBySelector:".product-browse__sortby--dropdown",urlSelector:jQuery("#productBrowseListing").attr("data-ajax-url"),urlFilterSelector:jQuery("#productFilterListing").attr("data-ajax-url"),totalRecords:"",totalPages:"",itemCount:"",noRecords:".no-records-found",isPaginationEnabled:!1,paginationObj:jQuery(".pagination-content"),pageLimit:10,scrollAmount:10},
//Product Listing
Symmons.productBrowse={init:function(a,b){var c=this;c.$container=jQuery(a),c.options=jQuery.extend({},jQuery.fn.productBrowse.options,b),
//As of now 5 filters - Fixed
c.$selectedStylesArray=[],c.$selectedFinishArray=[],c.$selectedPriceArray=[],c.$selectedFeaturesArray=[],c.$selectedCollectionsArray=[],c.$selectedSegmentArray=[],c.$selectedFamilyArray=[],c.$selectedCategoryArray=[],c.$selectedAttributesArray=[],c.$appliedFiltersArray=[],c.$searchKeyword="",c.$sortByVal="",c.$strTemplate="",$loading.show(),jQuery(c.options.noRecords).hide(),c.paginationLoaded=!1,c.isResetAdded=!1,c.isURLBinded=!1,c.$pageNum=1,c.$isHybrid=!1,/* if (self.options.isPaginationEnabled) {
         self.options.urlSelector = self.options.urlSelector + "?pageNum="+self.$pageNum;
       }*/
c.bindProductFilters()},bindHandlers:function(a){var b=this;""!=b.getUrlParameter("contentresultcount")&&(b.$isHybrid=!0),jQuery(document).on("click","input[type=checkbox]",function(a){Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)||(b.bindSelectedFilters(),b.isURLBinded=!1)}),jQuery(document).on("click",b.options.contentFilterCloseBy,function(a){b.bindRemoveSelectedFilter(a,this)}),jQuery(document).on("click",b.options.contentResetAllSelector,function(a){b.bindResetAllFilter(this)}),jQuery(document).on("click",b.options.contentRefinebuttonSelector,function(a){jQuery(b.options.contentBrowseFilter).show()}),jQuery(document).on("click",b.options.contentCloseFilter,function(a){jQuery(b.options.contentBrowseFilter).hide()}),jQuery(document).on("click",b.options.contentCancelFilter,function(a){jQuery(b.options.contentBrowseFilter).hide(),jQuery(".product-browse__filtershead").removeClass("expanded")}),jQuery(document).on("change",b.options.contentSortBySelector,function(a){b.bindProductSorting(this),b.isURLBinded=!1}),jQuery(document).on("click",b.options.contentSearchFilter,function(a){Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)||b.bindProductSearch(this)}),jQuery(document).on("click",b.options.contentApplyButton,function(a){b.bindSelectedFiltersMobile()}),/* if (Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)) {
         jQuery(window).scroll(function () {
           if (jQuery(this).scrollTop() > self.options.scrollAmount) {
             jQuery(self.options.contentBrowseFilter).addClass('fixed');
           }
         });
       }*/
//Search - Text Box Enter
jQuery(document).on("keypress",b.options.contentSearchField,function(a){""!=jQuery(".self.options.contentSearchField").val()?jQuery(".img-close-grey").addClass("show"):jQuery(".img-close-grey").removeClass("show"),Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)||
//Search - Text Box Enter
13==a.keyCode&&b.bindProductSearch(this)}),jQuery(document).on("click",b.options.contentClearSearchVal,function(a){a.preventDefault(),jQuery(b.options.contentSearchField).val(""),jQuery(b.options.contentClearSearchVal).removeClass("show")}),
// jQuery(window).resize(function () {
//   if (Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)) {
//     //jQuery(self.options.contentBrowseFilter).hide();
//     jQuery(self.options.contentFiltersSection).hide();
//   } else {
//     // jQuery(self.options.contentBrowseFilter).removeClass('fixed');
//     jQuery(self.options.contentBrowseFilter).show();
//     self.bindShowHideFiltersSection();
//
//   }
//
// });
b.bindSelectedItem()},getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},bindSelectedItem:function(){var a=this,b=a.getUrlParameter("collection"),c=a.getUrlParameter("feature"),d=a.getUrlParameter("style"),e=a.getUrlParameter("category"),f=a.getUrlParameter("segment"),g=a.getUrlParameter("attribute"),h=a.getUrlParameter("family"),i=jQuery.trim(a.getUrlParameter("keyword"));if(""!==e){a.$selectedCategoryArray.push(e);var j=jQuery('input:checkbox[name="chk_'+e+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==f){a.$selectedSegmentArray.push(f);var j=jQuery('input:checkbox[name="chk_'+f+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==g){a.$selectedAttributesArray.push(g);var j=jQuery('input:checkbox[name="chk_'+g+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==h){a.$selectedFamilyArray.push(h);var j=jQuery('input:checkbox[name="chk_'+h+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==b){a.$selectedCollectionsArray.push(b);var j=jQuery('input:checkbox[name="chk_'+b+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==c){a.$selectedFeaturesArray.push(c);var j=jQuery('input:checkbox[name="chk_'+c+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}if(""!==d){a.$selectedStylesArray.push(d);var j=jQuery('input:checkbox[name="chk_'+d+'"]');j.prop("checked",!0),a.$appliedFiltersArray.push(j.data("attr-group")+"|"+j.data("attr-filtername")+"|"+j.val())}""!==i&&(jQuery(a.options.contentSearchField).val(i),a.$searchKeyword=i),a.bindProductSearch()},bindRemoveSelectedFilter:function(a,b){var c=this;if("search"!=jQuery(b).data("attr-type")){var d=jQuery(b).parent().parent().data("attr-filterobj"),e=d.split("|")[2],f=d.split("|")[0].split("__")[0];switch(jQuery('input:checkbox[name="chk_'+e+'"]').attr("checked",!1),c.$appliedFiltersArray.splice(jQuery.inArray(d,c.$appliedFiltersArray),1),f){case"Styles":c.$selectedStylesArray.splice(jQuery.inArray(e,c.$selectedStylesArray),1);break;case"Finish":c.$selectedFinishArray.splice(jQuery.inArray(e,c.$selectedFinishArray),1);break;case"Price Range":c.$selectedPriceArray.splice(jQuery.inArray(e,c.$selectedPriceArray),1);break;case"Smart Features":c.$selectedFeaturesArray.splice(jQuery.inArray(e,c.$selectedFeaturesArray),1);break;case"Collections":c.$selectedCollectionsArray.splice(jQuery.inArray(e,c.$selectedCollectionsArray),1);break;case"Product Segment":c.$selectedSegmentArray.splice(jQuery.inArray(e,c.$selectedSegmentArray),1);break;case"Product Family":c.$selectedFamilyArray.splice(jQuery.inArray(e,c.$selectedFamilyArray),1);break;case"Product Category":c.$selectedCategoryArray.splice(jQuery.inArray(e,c.$selectedCategoryArray),1);break;case"Special Attributes":c.$selectedAttributesArray.splice(jQuery.inArray(e,c.$selectedAttributesArray),1)}c.bindAppliedFilters()}else c.$searchKeyword="",jQuery(c.options.contentSearchField).val(""),jQuery(b).parent().parent().remove(),jQuery(c.options.contentClearSearchVal).removeClass("show"),c.bindShowHideFiltersSection(),c.bindProductListAjax()},bindResetAllFilter:function(){var a=this;a.$selectedStylesArray=[],a.$selectedFinishArray=[],a.$selectedPriceArray=[],a.$selectedFeaturesArray=[],a.$selectedCollectionsArray=[],a.$selectedSegmentArray=[],a.$selectedFamilyArray=[],a.$selectedCategoryArray=[],a.$selectedAttributesArray=[],a.$appliedFiltersArray=[],jQuery(".product-browse__filterlist .custom-checkbox").attr("checked",!1),a.$searchKeyword="",jQuery(a.options.contentSearchField).val(""),a.$sortByVal="",jQuery(a.options.contentSortBySelector).val("High"),a.bindAppliedFilters()},bindProductFilters:function(){var a=this;
// Make the AJAX call
jQuery.ajax({url:a.options.urlFilterSelector,type:"GET",cache:!0,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,error:function(a){console.log("Error"+a.responseText)},success:function(b){
// console.log(data);
jQuery(a.options.contentFilterSelector).html(""),a.bindFilterListing(b),jQuery.exists(".product-browse__filtershead")&&addExpanded(".product-browse__filtershead","expanded",!1,!1)}})},bindProductListAjax:function(){var a=this,b=a.$selectedStylesArray,c=a.$selectedFinishArray,d=a.$selectedPriceArray,e=a.$selectedFeaturesArray,f=a.$selectedCollectionsArray,g=a.$selectedSegmentArray,h=a.$selectedFamilyArray,i=a.$selectedCategoryArray,j=a.$selectedAttributesArray;
// Make the AJAX call
jQuery.ajax({url:a.options.urlSelector+"?pageNum="+a.$pageNum+"&sortby="+a.$sortByVal+"&searchkey="+a.$searchKeyword+"&styles="+b+"&finish="+c+"&price="+d+"&smartfeatures="+e+"&collections="+f+"&segment="+g+"&family="+h+"&category="+i+"&attributes="+j+"&isHybrid="+a.$isHybrid,type:"GET",cache:!0,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,error:function(a){console.log("Error"+a.responseText)},success:function(b){a.options.totalRecords=jQuery(b)[0].TotalRecordCount,a.options.totalPages=jQuery(b)[0].TotalPagesCount,jQuery(a.options.itemCount).html(a.options.totalRecords),a.$isHybrid=!1,0!=jQuery(b)[0].ContentListingCount?(jQuery(".product-browse__content-count").show(),jQuery(".product-browse__backcta").addClass("show"),jQuery(".product-browse__backcta-desktop").removeClass("hide").addClass("show"),jQuery(".product-browse__contentcount").html(", "+jQuery(b)[0].ContentListingCount)):(jQuery(".product-browse__content-count").hide(),jQuery(".product-browse__backcta").removeClass("show"),jQuery(".product-browse__backcta-desktop").removeClass("show").addClass("hide")),a.options.totalRecords>0?(jQuery(a.options.noRecords).hide(),jQuery(a.options.contentSelector).show(),a.bindProductListing(b),a.options.isPaginationEnabled&&(a.options.isPaginationEnabled&&("1"==a.options.totalPages?a.options.paginationObj.hide():a.options.paginationObj.show()),a.paginationLoaded||a.bindPagination(),a.paginationLoaded=!0,jQuery(a.options.contentSelector).data("paginate").refresh(1,a.options.totalPages))):(jQuery(a.options.noRecords).show(),jQuery(a.options.contentSelector).hide(),a.options.isPaginationEnabled&&a.options.paginationObj.hide(),$loading.hide())}})},bindSelectedFiltersMobile:function(a){var b=this;b.$searchKeyword=jQuery(b.options.contentSearchField).val(),b.$searchKeyword=jQuery.trim(b.$searchKeyword),jQuery(b.options.contentBrowseFilter).hide(),b.bindSelectedFilters(),
//reset values
jQuery(".product-browse__filterlist .custom-checkbox").attr("checked",!1),jQuery(b.options.contentSearchField).val(""),jQuery(".product-browse__filtershead").removeClass("expanded")},bindSelectedFilters:function(a){var b=this;b.$selectedStylesArray=[],b.$selectedFinishArray=[],b.$selectedPriceArray=[],b.$selectedFeaturesArray=[],b.$selectedCollectionsArray=[],b.$selectedSegmentArray=[],b.$selectedFamilyArray=[],b.$selectedCategoryArray=[],b.$selectedAttributesArray=[],b.$appliedFiltersArray=[],jQuery('input[type="checkbox"]:checked').each(function(a,c){var d=jQuery(c).data("attr-group").split("__")[0];switch(d){case"Styles":b.$selectedStylesArray.push(jQuery(c).val());break;case"Finish":b.$selectedFinishArray.push(jQuery(c).val());break;case"Price Range":b.$selectedPriceArray.push(jQuery(c).val());break;case"Smart Features":b.$selectedFeaturesArray.push(jQuery(c).val());break;case"Collections":b.$selectedCollectionsArray.push(jQuery(c).val());break;case"Product Segment":b.$selectedSegmentArray.push(jQuery(c).val());break;case"Product Family":b.$selectedFamilyArray.push(jQuery(c).val());break;case"Product Category":b.$selectedCategoryArray.push(jQuery(c).val());break;case"Special Attributes":b.$selectedAttributesArray.push(jQuery(c).val())}b.$appliedFiltersArray.push(jQuery(c).data("attr-group")+"|"+jQuery(c).data("attr-filtername")+"|"+jQuery(c).val())}),b.bindAppliedFilters()},bindShowHideFiltersSection:function(){var a=this;jQuery(a.$appliedFiltersArray).length>0||""!=a.$searchKeyword?jQuery(a.options.contentFiltersSection).show():jQuery(a.options.contentFiltersSection).hide()},bindAppliedFilters:function(){var a=this;a.$strTemplate="",Modernizr.mq(Symmons.Settings.MediaQueries.BelowTablet)||a.bindShowHideFiltersSection(),jQuery(a.$appliedFiltersArray).each(function(b,c){var d=c.split("|");return"undefined"!==d[0]&&"undefined"!==d[1]&&"undefined"!==d[2]&&(a.$strTemplate+="<li class='product-browse__filterslist--item' data-attr-filterobj='"+d[0]+"|"+d[1]+"|"+d[2]+"'><label class='product-browse__filterslabel'>",a.$strTemplate+=d[1],void(a.$strTemplate+="<a class='product-browse__filtersclose' data-attr-type='options'></a></label></li>"))}),""!=a.$searchKeyword&&(a.$strTemplate+="<li class='product-browse__filterslist--item'><label class='product-browse__filterslabel'>",a.$strTemplate+="<span>"+a.$searchKeyword+"</span>",a.$strTemplate+="<a class='product-browse__filtersclose by-search' data-attr-type='search'></a></label></li>"),
// if (!self.isResetAdded) {
a.$strTemplate+="<li><a class='product-browse__filtersreset'>Reset All</a></li>",a.isResetAdded=!0,
// }
jQuery(a.options.contentAppliedFilterSelector).html("").append(a.$strTemplate),a.bindProductListAjax()},bindProductSorting:function(a){var b=this;b.$sortByVal="",b.$sortByVal=jQuery(a).val(),b.bindProductListAjax()},bindProductSearch:function(a){var b=this;b.$strTemplate="",b.$searchKeyword=jQuery(b.options.contentSearchField).val(),b.$searchKeyword=jQuery.trim(b.$searchKeyword),b.bindShowHideFiltersSection(),jQuery(".product-browse__filterslist").children().hasClass("search-key")?jQuery(".search-key .product-browse__filterslabel span").html(b.$searchKeyword):(b.$strTemplate+="<li class='product-browse__filterslist--item search-key'><label class='product-browse__filterslabel'>",b.$strTemplate+="<span>"+b.$searchKeyword+"</span>",b.$strTemplate+="<a class='product-browse__filtersclose' data-attr-type='search'></a></label></li>",b.isResetAdded||(b.$strTemplate+="<li><a class='product-browse__filtersreset'>Reset All</a></li>",b.isResetAdded=!0),0==jQuery(b.options.contentAppliedFilterSelector).children().length?jQuery(b.options.contentAppliedFilterSelector).append(b.$strTemplate):jQuery(b.$strTemplate).insertBefore(jQuery(b.options.contentAppliedFilterSelector).children().last())),b.bindAppliedFilters()},bindPagination:function(){var a=this;jQuery(a.options.contentSelector).paginate({query:"pageNum",pagerData:"pager",pageData:"page",next:"next",prev:"prev",first:"first",last:"last",pageInput:$(".pagination__input"),updatePagerState:!0,totalPagesElem:$(".pagination__totalpages"),ajaxURLData:"ajax-url",onBefore:function(){url=new Url(jQuery(a.options.contentSelector).attr("data-ajax-url")),url.query.sortby=a.$sortByVal,url.query.searchkey=a.$searchKeyword,url.query.styles=a.$selectedStylesArray.toString(),url.query.finish=a.$selectedFinishArray.toString(),url.query.price=a.$selectedPriceArray.toString(),url.query.smartfeatures=a.$selectedFeaturesArray.toString(),url.query.collections=a.$selectedCollectionsArray.toString(),url.query.segment=a.$selectedSegmentArray.toString(),url.query.family=a.$selectedFamilyArray.toString(),url.query.category=a.$selectedCategoryArray.toString(),url.query.attributes=a.$selectedAttributesArray.toString(),url.query.isHybrid=a.$isHybrid,jQuery(a.options.contentSelector).attr("data-ajax-url",url.toString())},onSuccess:function(b){a.bindProductListing(b)}})},bindProductListing:function(data){var self=this,$container=jQuery(self.options.templateSelector),$theTemplate=Handlebars.compile($container.html());jQuery(self.options.contentSelector).html("").append($theTemplate(eval(data))),$loading.hide(),jQuery(".product-browse__results").addClass("product-browse__results--loaded")},bindFilterListing:function(data){var self=this,$container=jQuery(self.options.templateFilterSelector),$theTemplate=Handlebars.compile($container.html());jQuery(self.options.contentFilterSelector).append($theTemplate(eval(data))),self.bindHandlers()}}}(jQuery);
//# sourceMappingURL=symmons_012.js.map