var Symmons=Symmons||{};!function($){"use strict";jQuery.fn.salesRepListing=function(a){return this.each(function(){var b=Object.create(Symmons.salesRepListing);b.init(this,a)})},
//Options
jQuery.fn.salesRepListing.options={contentSelector:"#salesrep-listing",templateSelector:"#template-salesRepListing",urlSelector:jQuery("#salesrep-listing").attr("data-ajax-url"),stateSelector:".sales-reps__state",totalRecords:"",totalPages:"",itemCount:"",noRecords:".no-records-found",isPaginationEnabled:!0,paginationObj:jQuery("#pagination-3 .pagination-content"),pageLimit:10,storeTab3:"#storeTab3",scrollAmount:10,ajaxSpinner:"#loader-3"},
//Product Listing
Symmons.salesRepListing={init:function(a,b){var c=this;c.$container=jQuery(a),c.options=jQuery.extend({},jQuery.fn.salesRepListing.options,b),c.$selectedState="",c.$latitude="",c.$longitude="",jQuery(c.options.noRecords).hide(),c.$pageNum=1,c.bindHandlers(),c.browserSupportFlag=new Boolean},bindHandlers:function(a){var b=this;jQuery(document).on("change",b.options.stateSelector,function(a){b.bindSelectedState(this)}),jQuery(document).on("click",b.options.storeTab3,function(a){a.preventDefault(),b.$selectedState="",b.$selectedStateCode="",jQuery(b.options.contentSelector).hide(),b.options.isPaginationEnabled&&b.options.paginationObj.hide(),b.bindDetectlocation()})},bindSelectedState:function(a){var b=this;b.$selectedState=jQuery(a).val(),b.bindSalesRepListAjax()},bindDetectlocation:function(a){var b=this;jQuery(b.options.ajaxSpinner).hide(),
// Try W3C Geolocation (Preferred)
navigator.geolocation?(b.browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(function(a){
//initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
//self.$latitude = position.coords.latitude;
//self.$longitude = position.coords.longitude;
//jQuery(self.options.ajaxSpinner).show();
jQuery(b.options.ajaxSpinner).show(),b.bindCurrentLocationAdress(a.coords.latitude,a.coords.longitude)},function(){b.bindHandleNoGeolocation(b.browserSupportFlag)})):(b.browserSupportFlag=!1,b.bindHandleNoGeolocation(b.browserSupportFlag))},bindCurrentLocationAdress:function(a,b){var c=this,d=new google.maps.Geocoder,e=new google.maps.LatLng(a,b);c.$location="",d.geocode({latLng:e},function(a,b){if(b==google.maps.GeocoderStatus.OK)if(a[0]){c.$locationAddress=c.$currentLocality_long+", "+c.$currentState_short;for(var d=0;d<a[0].address_components.length;d++)for(var e=0;e<a[0].address_components[d].types.length;e++)"administrative_area_level_1"==a[0].address_components[d].types[e]&&(c.$currentState_short=a[0].address_components[d].short_name);c.$selectedStateCode=c.$currentState_short,c.bindSalesRepListAjax()}else console.log("Google did not return any results.");else console.log("Reverse Geocoding failed due to: ",b)})},bindHandleNoGeolocation:function(a){var b=this;1==a?console.log("Geolocation service failed."):console.log("Your browser doesn't support geolocation."),b.bindSalesRepListAjax()},bindSalesRepListAjax:function(){var a=this;jQuery.ajax({url:a.options.urlSelector+"?pageNum="+a.$pageNum+"&state="+a.$selectedState+"&statecode="+a.$selectedStateCode,type:"GET",cache:!0,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,error:function(a){console.log("Error"+a.responseText)},success:function(b){a.options.totalRecords=jQuery(b)[0].TotalRecordCount,a.options.totalPages=jQuery(b)[0].TotalPagesCount,null!=b.SelectedStateId&&""!=b.SelectedStateId&&jQuery(a.options.stateSelector).val(b.SelectedStateId),a.options.totalRecords>0?(jQuery(a.options.noRecords).hide(),jQuery(a.options.contentSelector).show(),a.options.isPaginationEnabled&&a.options.paginationObj.show(),a.bindSalesRepListing(b),a.options.isPaginationEnabled&&(a.options.isPaginationEnabled&&("1"==a.options.totalPages?a.options.paginationObj.hide():a.options.paginationObj.show()),a.paginationLoaded||a.bindPagination(),a.paginationLoaded=!0,jQuery(a.options.contentSelector).data("paginate").refresh(1,a.options.totalPages))):(jQuery(a.options.noRecords).show(),jQuery(a.options.ajaxSpinner).hide(),jQuery(a.options.contentSelector).hide(),a.options.isPaginationEnabled&&a.options.paginationObj.hide())}})},bindPagination:function(){var a=this;jQuery(a.options.contentSelector).paginate({query:"pageNum",pagerData:"pager",pageData:"page",next:"next",prev:"prev",first:"first",last:"last",pageInput:$(".pagination__input"),updatePagerState:!0,totalPagesElem:$(".pagination__totalpages"),ajaxURLData:"ajax-url",onBefore:function(){url=new Url(jQuery(a.options.contentSelector).attr("data-ajax-url")),url.query.state=a.$selectedState,jQuery(a.options.contentSelector).attr("data-ajax-url",url)},onSuccess:function(b){a.bindSalesRepListing(b)}})},bindSalesRepListing:function(data){var self=this,$container=jQuery(self.options.templateSelector),$theTemplate=Handlebars.compile($container.html());self.options.isPaginationEnabled&&self.options.paginationObj.show(),jQuery(self.options.contentSelector).html("").append($theTemplate(eval(data))),jQuery(self.options.ajaxSpinner).hide()}}}(jQuery);
//# sourceMappingURL=symmons_015.js.map